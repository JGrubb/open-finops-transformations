version: 2

sources:
  - name: gcp_billing
    description: |
      GCP Billing Export - Detailed usage data with resource-level information.

      Configure the source location in your dbt_project.yml:
      ```yaml
      vars:
        finops_focus:
          gcp:
            database: your-gcp-project-id
            schema: your_billing_dataset
            table_identifier: gcp_billing_export_resource_v1_XXXXXX_XXXXXX_XXXXXX
      ```
    database: "{{ var('finops_focus', {}).get('gcp', {}).get('database', target.database) }}"
    schema: "{{ var('finops_focus', {}).get('gcp', {}).get('schema', 'detailed_billing_data') }}"
    tables:
      - name: gcp_billing_export
        identifier: "{{ var('finops_focus', {}).get('gcp', {}).get('table_identifier', 'gcp_billing_export') }}"
        description: Raw GCP detailed billing export table with resource information
