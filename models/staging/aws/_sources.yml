version: 2

sources:
  - name: aws_billing
    description: |
      AWS Cost and Usage Report (CUR) - Detailed billing data.

      Configure the source location in your dbt_project.yml:
      ```yaml
      vars:
        finops_focus:
          aws:
            database: your-project-id
            schema: your_cur_dataset
            table_identifier: your_actual_cur_table_name
      ```
    database: "{{ var('finops_focus', {}).get('aws', {}).get('database', target.database) }}"
    schema: "{{ var('finops_focus', {}).get('aws', {}).get('schema', 'aws_billing_data') }}"
    tables:
      - name: aws_cur_data
        identifier: "{{ var('finops_focus', {}).get('aws', {}).get('table_identifier', 'aws_cur_data') }}"
        description: Raw AWS Cost and Usage Report billing export table
